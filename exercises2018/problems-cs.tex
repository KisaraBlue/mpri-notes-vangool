\input{preamble-notes}

\usepackage[final]{pdfpages}
\usepackage{graphicx}

\begin{document}

\thispagestyle{empty}
\begin{center}
{\bf Problem Set: Applications of duality theory to computer science}
\end{center}

{\bf Problem 1.} Let $\Sigma = \{a,b\}$. Consider the regular $\Sigma$-language $L = (ab)^*$. Recall that $B(L)$ is the Boolean algebra generated by $\{u^{-1}Lv^{-1} \ | \ u, v \in \Sigma^*\}$. We saw in the lectures that, in this case, $B(L)$ is generated by the four languages $(ab)^*, a(ba)^*, b(ab)^*,$ and $(ba)^*$. Write $X(L)$ for the set of atoms of $B(L)$.

\begin{enumerate}
	%\item Show that, if $B$ is a finite Boolean subalgebra of $\mathcal{P}(X)$, then the atoms of $B$ are the smallest partition of $X$ consisting of elements of $B$.
	\item Prove that $X(L) = \{x_1,\dots,x_6\}$, where $x_1 := \{\epsilon\}$, $x_2 := (ab)^+$, $x_3 := (ba)^+$, $x_4 := a(ba)^*$, $x_5 := b(ab)^*$ and $x_6 := \Sigma^* \setminus \left(\bigcup_{i=1}^5 x_i\right)$.
	\item Describe the function $\eta \colon \Sigma^* \onto X(L)$ which is dual to the inclusion map $B(L) \into \mathcal{P}(\Sigma^*)$.
	\item Show that, for any $w_1,w_2,w_1',w_2' \in \Sigma^*$, if $\eta(w_1) = \eta(w_1')$, $\eta(w_2) = \eta(w_2')$, then $\eta(w_1w_2) = \eta(w_1'w_2')$. Conclude that $X(L)$ is a finite monoid quotient of $\Sigma^*$.
	\item Is the syntactic monoid $X(L)$ aperiodic? Prove your assertion. (You may either appeal to Sch\"utzenberger's Theorem, or prove it directly.)
\end{enumerate}

{\bf Problem 2.} In this problem, you will prove that there is a bijection between the free pro-aperiodic monoid and the set of elementary equivalence classes of first-order models. Let $\Sigma$ be a finite alphabet and let $T$ be the first-order theory of finite $\Sigma$-words, i.e.,
\[ T = \{\phi \text{ a sentence in } \mathrm{FO}[<,\Sigma] \ | \ W \models \phi \text{ for every finite $\Sigma$-word $W$}\}.\]
For $\phi, \psi$ sentences in $\mathrm{FO}[<,\Sigma]$, write $\phi \equiv_T \psi$ iff $T \vdash \phi \liff \psi$, and denote by $\mathcal{L}_T$ the Lindenbaum algebra of $T$, i.e., the Boolean algebra of $\equiv_T$-equivalence classes of sentences in $\mathrm{FO}[<,\Sigma]$.
\begin{enumerate}
\item Show that the function $i \colon \mathcal{L}_T \to \mathcal{P}(\Sigma)$, which sends $[\phi]_{\equiv_T}$ to $L(\phi)$, is well-defined, and an injective Boolean algebra homomorphism.
\item Explain why Sch\"utzenberger's Theorem, together with item (a), implies that the Boolean algebra $\mathcal{L}_T$ is isomorphic to the Boolean algebra $\mathrm{AP}(\Sigma)$ of $\Sigma$-languages whose syntactic monoid is aperiodic. 
\item For any (possibly infinite) model $W$ of the theory $T$, define a subset $x_W$ of $\mathcal{L}_T$ by 
\[ x_W := \{[\phi]_{\equiv_T} \ | \ W \models \phi\}.\]
Prove that $x_W$ is an ultrafilter of $\mathcal{L}_T$, and that $x_W = x_{W'}$ if, and only if, $W$ and $W'$ are elementarily equivalent.
\item Prove that, for any ultrafilter $x$ of $\mathcal{L}_T$, there exists a model $W$ of $T$ such that $x = x_W$.

 {\it Hint.} Apply the completeness theorem for first-order logic.
\item Use (b)--(d) to prove that the set underlying the free pro-aperiodic monoid over $\Sigma$  is in a bijection with the set of elementary equivalence classes of models of $T$. 

{\it Hint.} Use the fact that the free pro-aperiodic monoid over $\Sigma$ is the dual space of $\mathrm{AP}(\Sigma)$.

{\it Remark.} The bijection constructed in this problem is in fact an isomorphism of topological monoids; see Theorem 10 in [v. Gool \& Steinberg, STACS 2017].
\end{enumerate}
\end{document}